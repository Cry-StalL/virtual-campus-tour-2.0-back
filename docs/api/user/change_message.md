# 用户信息修改接口

## 接口说明

提供用户信息修改功能，包括用户名修改和密码重置。

## 请求信息

- 基础路径：`/api/v1/users`
- 请求头：
  ```
  Content-Type: application/json
  ```

## 接口列表

### 1. 更新用户名

- 请求路径：`/api/v1/users/updateUsername`
- 请求方法：`POST`

#### 请求参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| userId | string | 是 | 用户ID |
| username | string | 是 | 新用户名 |

#### 请求示例

```json
{
  "userId": "12345",
  "username": "newUsername"
}
```

#### 要求

1. 用户名长度必须在3-20个字符之间
2. 用户名只能包含字母、数字和下划线
3. 用户名不能与现有用户重复

#### 响应信息

##### 成功响应

- 状态码：`200`
- 响应格式：`application/json`
- 响应示例：
```json
{
  "code": 0,
  "message": "success",
  "data": {
    "username": "newUsername",
    "updateTime": "2023-06-15T10:30:45Z"
  }
}
```

##### 错误响应

- 状态码：`400`
- 响应格式：`application/json`
- 响应示例：
```json
{
  "code": 1002,
  "message": "用户名已被占用",
  "data": null
}
```

### 2. 重置密码

- 请求路径：`/api/v1/users/resetPassword`
- 请求方法：`POST`

#### 请求参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| userId | string | 是 | 用户ID |
| password | string | 是 | 新密码 |

#### 请求示例

```json
{
  "userId": "12345",
  "password": "newSecurePassword"
}
```

#### 要求

1. 密码长度必须在6-20个字符之间
2. 密码必须包含至少一个字母和一个数字
3. 密码不能与旧密码相同

#### 响应信息

##### 成功响应

- 状态码：`200`
- 响应格式：`application/json`
- 响应示例：
```json
{
  "code": 0,
  "message": "success",
  "data": {
    "updateTime": "2023-06-15T10:35:22Z"
  }
}
```

##### 错误响应

- 状态码：`400`
- 响应格式：`application/json`
- 响应示例：
```json
{
  "code": 1003,
  "message": "密码不符合安全要求",
  "data": null
}
```

## 状态码及响应中的code列表

| 状态码 | 响应中的code | 说明 |
|--------|-------------|------|
| 200 | 0 | 成功响应 |
| 400 | 1001 | 用户不存在 |
| 400 | 1002 | 用户名已被占用 |
| 400 | 1003 | 密码不符合安全要求 |
| 400 | 1004 | 新密码与旧密码相同 |
| 400 | 1005 | 用户名格式不正确 |
| 401 | 1006 | 未授权或登录已过期 |
| 403 | 1007 | 无权限执行该操作 |
| 500 | 1008 | 服务器内部错误 |

## 安全注意事项

1. 所有密码应在前端进行初步加密后再传输
2. 建议使用 HTTPS 加密传输所有数据
3. 敏感操作（如密码重置）应考虑添加额外的身份验证步骤
4. 服务器应对所有输入进行严格验证，防止注入攻击
5. 用户密码在服务器端应使用强哈希算法存储，不应明文保存 