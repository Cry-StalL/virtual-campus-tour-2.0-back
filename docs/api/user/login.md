# 用户登录接口

## 接口说明

用户使用邮箱和密码登录并获取访问令牌（token）。

## 请求信息

- 请求路径：`/api/v1/users/login`
- 请求方法：`POST`
- 请求头：
  ```
  Content-Type: application/json
  ```

## 请求参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| email | string | 是 | 注册时使用的电子邮箱 |
| password | string | 是 | 密码 |

## 请求示例

```json
{
  "email": "test@example.com",
  "password": "qwerty123456"
}
```

## 要求

### 安全性
1. 密码在传输过程中需要加密处理
2. 登录失败次数限制（同一IP 10分钟内最多尝试5次）
3. 返回的token需要设置合理的过期时间

### 数据校验
1. 验证该邮箱是否注册账号
2. 验证密码是否正确
3. 验证邮箱格式是否正确

## 响应信息

### 成功响应

- 状态码：`200`
- 响应格式：`application/json`
- 响应示例：
```json
{
  "code": 0,
  "message": "success",
  "data": {
    "user_id": 1,
    "username": "testuser",
    "email": "test@example.com",
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "expire_time": "2024-03-21T10:00:00Z"
  }
}
```

### 错误响应

- 状态码：`400`/`401`
- 响应格式：`application/json`
- 响应示例：

1. 邮箱未注册：
```json
{
  "code": 1001,
  "message": "该邮箱尚未注册，请先注册",
  "data": null
}
```

2. 密码错误：
```json
{
  "code": 1002,
  "message": "密码错误",
  "data": null
}
```

3. 邮箱格式错误：
```json
{
  "code": 1003,
  "message": "邮箱格式不正确",
  "data": null
}
```

## 状态码及响应中的code列表

| 状态码 | 响应中的code | 说明 |
|--------|-------------|------|
| 200 | 0 | 登录成功 |
| 400 | 1001 | 该邮箱尚未注册，请先注册 |
| 400 | 1002 | 密码错误 |
| 400 | 1003 | 邮箱格式不正确 |
| 429 | 1004 | 登录尝试次数过多，请稍后再试 |
| 401 | 1005 | 账号已被禁用 |

## 错误码说明

| 错误码 | 说明 |
|--------|------|
| 400 | 请求参数错误 |
| 401 | 认证失败 |
| 429 | 请求过于频繁 |
| 500 | 服务器内部错误 |

## 注意事项

1. token的使用：
   - 后续请求需要在Header中携带token
   - 格式：`Authorization: Bearer <token>`
   
2. 安全建议：
   - 建议使用HTTPS传输
   - 密码传输前先进行加密
   - 存储密码时使用加盐哈希
   - 邮箱地址应进行规范化处理（统一大小写）

3. 错误处理：
   - 为了用户体验，明确区分邮箱未注册和密码错误的情况
   - 记录登录失败的日志，用于安全审计 